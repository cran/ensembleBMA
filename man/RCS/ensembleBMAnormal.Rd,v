head	1.5;
access;
symbols;
locks
	fraley:1.5; strict;
comment	@# @;


1.5
date	2007.02.22.19.54.32;	author fraley;	state Exp;
branches;
next	1.4;

1.4
date	2007.02.14.23.26.14;	author fraley;	state Exp;
branches;
next	1.3;

1.3
date	2007.02.07.19.18.53;	author fraley;	state Exp;
branches;
next	1.2;

1.2
date	2007.02.07.19.00.48;	author fraley;	state Exp;
branches;
next	1.1;

1.1
date	2006.12.29.20.37.34;	author fraley;	state Exp;
branches;
next	;


desc
@@


1.5
log
@*** empty log message ***
@
text
@\name{ensembleBMAnormal}
\alias{ensembleBMAnormal}
\title{
    BMA mixture of normals modeling for ensemble forecasts.  
}
\description{
   Fits a Bayesian Model Averaging mixture of normals to ensemble forecasts.
}
\usage{
ensembleBMAnormal( ensembleData, dates = NULL, training = list(length = 30, lag = 2), 
                   control = controlBMAnormal(), minCRPS = FALSE)
}
\arguments{
  \item{ensembleData}{
     An \code{ensembleData} object including ensemble forecasts, observations 
     and dates of precipitation. 
  }
  \item{dates}{
     The dates for which modeling is desired. By default, this will include all
     dates consistent with the training rule.
  }
  \item{training}{
     A list giving the \code{length} and \code{lag} for the training period.
     The default is to use a 25 day training period for a forecast
     2 days ahead of the last day in the training period.
  }
  \item{control}{
     A list of control values for the fitting functions. The defaults are
     given by the function \code{controlBMAnormal}.
  }
  \item{minCRPS}{
     A logical variable indicating whether or not to add a postprocessing
     step after the BMA fit to choose the standard deviation so as to
     minimize the CRPS. The default is not to do the CRPS minimization,
     which can add considerable extra cost to the computation, especially
     when unequal variances are specified in \code{control}.
  }
}
\value{
A list with the following output components:
  \item{dateTable}{
    The table of observations corresponding to the dates in 
    \code{ensembleData} in chronological order.
  }
  \item{training}{
    The training rule specified as input.
  }
 \item{biasCoefs}{
    The fitted bias-correction coefficients at each date.
  }
  \item{sd}{
    The fitted standard deviations for the mixture of normals model
    at each date.
  }
  \item{weights}{
    The fitted weights for the mixture of normals modelat each date.
  }
}
\details{
   The output is for all of the \code{dates} in \code{ensembleData}, so there
   will be missing entries denoted by \code{NA} for dates that are too recent 
   to be forecast with  the training rule. \cr
   The following methods are available for \code{ensembleBMAnormal} objects:
   \code{gridForecastBMA}, \code{quantileForecastBMA}, 
   \code{bmaModelParameters},  \code{brierSkillScores}, and \code{crpsANDmae}.
}
\seealso{
  \code{\link{ensembleData}}, 
  \code{\link{forecastBMAnormal}}, 
  \code{\link{controlBMAnormal}}, 
  \code{\link{fitBMAnormal}},
  \code{\link{gridForecastBMA}},
  \code{\link{quantileForecastBMA}},
  \code{\link{bmaModelParameters}},
  \code{\link{brierSkillScores}},
  \code{\link{crpsANDmae}}
}
\references{
A. E. Raftery, T. Gneiting, F. Balabdaoui and M. Polakowski,
Using Bayesian Model Averaging to Calibrate Forecast Ensembles,
\emph{Monthly Weather Review 133:1155-1174, 2005}.
}

\examples{
\dontrun{
  data(slp)

  slpData <- ensembleData(forecasts = slp[c("AVN","GEM","ETA","NGM","NOGAPS")],
                          observations = slp$obs, dates = slp$date)

  slpFit <- ensembleBMAnormal( slpData, minCRPS = TRUE)
}
}
\keyword{models}
% docclass is function
@


1.4
log
@*** empty log message ***
@
text
@a85 1

d88 2
a89 3
  slpData <- ensembleData(forecasts = slp[c("AVN", "GEM", "ETA", "NGM", "NOGAPS")],
                          observations = slp$obs, dates = slp$init_date,
                          latitude = slp$lat, longitude = slp$lon)
@


1.3
log
@*** empty log message ***
@
text
@d64 2
a65 2
   \code{gridForecastBMA}, \code{quantileForecastBMA}, \code{parameters}, 
   \code{brierSkillScores}, and \code{crpsANDmae}.
d74 1
a74 1
  \code{\link{parameters}},
@


1.2
log
@*** empty log message ***
@
text
@d86 1
d89 1
a89 1
  slpData <- ensembleData(forecasts = slp[forecasts = c("AVN", "GEM", "ETA", "NGM", "NOGAPS")],
@


1.1
log
@Initial revision
@
text
@d10 2
a11 2
ensembleBMAnormal( ensembleData, training = list(length = 30, lag = 2), 
                   control = controlBMAnormal())
d14 1
a14 1
  \item{x}{
d16 5
a20 1
     and integer dates of precipitation. 
d31 7
d41 1
a41 1
  \item{nObs}{
d62 1
a62 1
   to be forecast with  the training rule. \\
d64 2
a65 1
   \code{quantileForecast}, \code{crps} and \code{crpsANDmae}.
d72 5
a76 2
  \code{\link{crps}},
  \code{\link{quantileForecast}}
d88 3
a90 2
  slpData <- ensembleData(forecasts = slp[,4:8], observations = slp[,9],
                      dates = slp[,1], latitude = slp[,2], longitude = slp[,3])
d92 1
a92 1
  slpFit <- ensembleBMAnormal( slpData)
@
